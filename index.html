<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LuAnimeSide</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 20px;
    }
    h1 { text-align: center; font-size: 40px; margin-bottom: 20px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px; }
    .card { background: #1c1c1c; border-radius: 12px; padding: 12px; display: flex; gap: 10px; }
    .thumb { width: 80px; height: 80px; background: #2b2b2b; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 12px; color: #aaa; }
    .meta { flex: 1; }
    .meta h3 { margin: 0; font-size: 18px; cursor: pointer; color: #62a0ff; }
    .badges { font-size: 12px; color: #bbb; margin-bottom: 5px; }
    .stars span { font-size: 20px; cursor: pointer; color: #555; }
    .stars span.active { color: gold; }
    .crown { font-size: 20px; cursor: pointer; margin-left: 8px; color: gray; }
    .crown.active { color: gold; }
    .confirm-box { margin-top: 6px; font-size: 13px; }
    .confirm-box button { margin-left: 5px; padding: 2px 6px; font-size: 12px; }
    /* Detailseite */
    #detail { display: none; max-width: 800px; margin: 0 auto; }
    #detail iframe { width: 100%; aspect-ratio: 16/9; border: none; border-radius: 8px; }
    .actions { margin-top: 12px; display: flex; gap: 10px; }
    .btn { padding: 8px 14px; border: none; border-radius: 8px; color: #fff; font-size: 14px; cursor: pointer; }
    .netflix { background: #e50914; }
    .crunchyroll { background: #f47521; }
    .aniworld { background: #7c4dff; }
    .back { background: #444; margin-top: 16px; }
    /* Konfetti */
    .confetti { position: fixed; top: 0; font-size: 24px; animation: fall 2s linear forwards; }
    @keyframes fall {
      to { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
  </style>
</head>
<body>
  <h1>LuAnimeSide</h1>

  <div id="main"><div class="grid" id="grid"></div></div>

  <div id="detail">
    <h2 id="detailTitle"></h2>
    <iframe id="detailTrailer" allowfullscreen></iframe>
    <div class="actions" id="detailLinks"></div>
    <button class="btn back" onclick="closeDetail()">Zur√ºck</button>
  </div>

  <script>
    const ANIME = [
      { title:"The Seven Deadly Sins", status:"watched", trailer:"https://www.youtube.com/embed/_erEYpW3L0E", links:{ aniworld:true } },
      { title:"Chainsaw Man", status:"watched", trailer:"https://www.youtube.com/embed/dFlDRhvM4L0", links:{ aniworld:true } },
      { title:"Demon Slayer", status:"watched", trailer:"https://www.youtube.com/embed/s2BNK1uy42g", links:{ crunchyroll:"https://crunchyroll.com/series/GY5P48XEY/demon-slayer" } },
      // ... (deine ganze Liste wie vorher, gek√ºrzt hier f√ºr √úbersicht)
    ];

    const grid=document.getElementById("grid");
    const detail=document.getElementById("detail");
    const main=document.getElementById("main");
    const detailTitle=document.getElementById("detailTitle");
    const detailTrailer=document.getElementById("detailTrailer");
    const detailLinks=document.getElementById("detailLinks");

    function render(){
      grid.innerHTML="";
      ANIME.forEach(a=>{
        const card=document.createElement("div");
        card.className="card";

        const thumb=document.createElement("div");
        thumb.className="thumb";
        thumb.textContent="Bild";

        const meta=document.createElement("div");
        meta.className="meta";

        const h3=document.createElement("h3");
        h3.textContent=a.title;
        h3.onclick=()=>openDetail(a);

        const badges=document.createElement("div");
        badges.className="badges";
        badges.textContent=a.status==="unfinished"?"Noch nicht fertig":"Gesehen";

        // Sterne
        const stars=document.createElement("div");
        stars.className="stars";
        let pendingRating=null;
        for(let s=1;s<=5;s++){
          const span=document.createElement("span");
          span.textContent="‚òÖ";
          span.onclick=()=>{
            pendingRating=s;
            showConfirm(stars, s, (ok)=>{
              if(ok){
                for(const ch of stars.children) ch.classList.remove("active");
                for(let j=0;j<s;j++) stars.children[j].classList.add("active");
              }
            });
          };
          stars.appendChild(span);
        }

        // Krone
        const crown=document.createElement("span");
        crown.className="crown";
        crown.textContent="üëë";
        crown.onclick=()=>{
          showConfirm(crown, null, (ok)=>{
            if(ok){
              crown.classList.add("active");
              confetti();
            }
          }, "Als Favorit markieren?");
        };

        meta.appendChild(h3);
        meta.appendChild(badges);
        meta.appendChild(stars);
        meta.appendChild(crown);

        card.appendChild(thumb);
        card.appendChild(meta);
        grid.appendChild(card);
      });
    }

    function showConfirm(el, rating, callback, text){
      let box=document.createElement("div");
      box.className="confirm-box";
      box.textContent=text || (rating+" Sterne geben?");
      const yes=document.createElement("button");
      yes.textContent="Ja";
      yes.onclick=()=>{ callback(true); box.remove(); };
      const no=document.createElement("button");
      no.textContent="Nein";
      no.onclick=()=>box.remove();
      box.appendChild(yes); box.appendChild(no);
      el.parentNode.insertBefore(box, el.nextSibling);
    }

    function confetti(){
      for(let i=0;i<20;i++){
        const c=document.createElement("div");
        c.className="confetti";
        c.textContent="üéâ";
        c.style.left=Math.random()*100+"vw";
        document.body.appendChild(c);
        setTimeout(()=>c.remove(),2000);
      }
    }

    function openDetail(a){
      main.style.display="none"; detail.style.display="block";
      detailTitle.textContent=a.title;
      detailTrailer.src=a.trailer;
      detailLinks.innerHTML="";
      if(a.links.netflix){
        const b=document.createElement("a");
        b.textContent="Netflix";
        b.href=a.links.netflix; b.target="_blank";
        b.className="btn netflix";
        detailLinks.appendChild(b);
      }
      if(a.links.crunchyroll){
        const b=document.createElement("a");
        b.textContent="Crunchyroll";
        b.href=a.links.crunchyroll; b.target="_blank";
        b.className="btn crunchyroll";
        detailLinks.appendChild(b);
      }
      if(a.links.aniworld){
        const b=document.createElement("button");
        b.textContent="AniWorld (!)";
        b.className="btn aniworld";
        b.onclick=()=>alert("Aus rechtlichen Gr√ºnden kein direkter Link. Bitte AniWorld selbst √∂ffnen und suchen.");
        detailLinks.appendChild(b);
      }
    }

    function closeDetail(){
      detail.style.display="none"; main.style.display="block"; detailTrailer.src="";
    }

    render();
  </script>
</body>
</html>
