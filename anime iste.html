<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>üì∫ Meine Anime Watchlist</title>
<meta name="description" content="Anime-Liste mit deutschem Trailer, AniWorld/Netflix/Crunchyroll-Links, Sterne-Bewertung und Krone.">
<style>
  :root{
    --bg:#0f172a; --card:#1e293b; --fg:#f1f5f9; --muted:#94a3b8; --border:#334155;
    --violet:#7c3aed; --violet-dark:#6d28d9;     /* AniWorld */
    --red:#e50914;                                /* Netflix  */
    --orange:#f97316;                             /* Crunchy  */
    --gold:#fbbf24;                               /* Sterne/Krone aktiv */
    --radius:12px; --shadow:0 6px 16px rgba(0,0,0,.35);
    --thumbW:120px; --thumbH:160px;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.55 system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .header{position:sticky;top:0;z-index:5;background:var(--card);padding:16px;border-bottom:1px solid var(--border)}
  h1{margin:0;font-size:20px}
  .container{max-width:980px;margin:16px auto;padding:0 12px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px;margin:12px 0}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:12px}
  input[type="search"],select{flex:1;min-width:180px;padding:10px;border-radius:8px;border:1px solid var(--border);background:#0b1220;color:var(--fg)}
  .list{display:flex;flex-direction:column;gap:10px}
  .row{background:#1a2436;border:1px solid var(--border);border-radius:10px;transition:.15s}
  .row:hover{background:#223149;transform:translateY(-2px)}
  .card-row{display:flex;gap:12px;padding:12px}
  .thumb{flex:0 0 var(--thumbW);width:var(--thumbW);height:var(--thumbH);border-radius:8px;background:#0b1220;border:1px solid var(--border);display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:12px;overflow:hidden}
  .thumb img{width:100%;height:100%;object-fit:cover;display:block}
  .info{flex:1;min-width:0}
  .title{margin:0 0 6px 0;font-size:18px;font-weight:800}
  .title button{all:unset;cursor:pointer;color:#fff}
  .title button:hover{text-decoration:underline}
  .meta{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
  .badge{display:inline-block;background:rgba(255,255,255,.08);color:var(--muted);padding:4px 8px;border-radius:6px;font-size:12px}

  /* Sterne + Krone */
  .rating{display:flex;align-items:center;gap:8px;margin-top:2px}
  .stars{display:inline-flex;gap:4px}
  .star{cursor:pointer;font-size:20px;color:#64748b;user-select:none;line-height:1}
  .star.filled{color:var(--gold)}
  .crown{cursor:pointer;font-size:20px;color:#64748b;user-select:none;line-height:1}
  .crown.active{color:var(--gold)}
  .confirm{display:none;gap:8px;align-items:center;margin-left:6px}
  .confirm.show{display:inline-flex}
  .btnMini{border:1px solid var(--border);background:#0b1220;color:#e5e7eb;border-radius:6px;padding:4px 8px;font-size:12px;cursor:pointer}
  .btnMini:hover{filter:brightness(1.1)}

  /* Details */
  .details{display:none;padding:10px 0 4px}
  .desc{margin:6px 0 10px 0}
  iframe{width:100%;height:240px;border:0;border-radius:8px;margin:8px 0}
  .btn{display:inline-block;padding:10px 14px;border-radius:8px;font-weight:700;text-decoration:none;color:#fff;margin-top:8px;box-shadow:0 4px 12px rgba(0,0,0,.25)}
  .btnAni{background:var(--violet);box-shadow:0 4px 12px rgba(124,58,237,.4)}
  .btnAni:hover{background:var(--violet-dark)}
  .btnNetflix{background:var(--red)}
  .btnNetflix:hover{filter:brightness(.9)}
  .btnCrunchy{background:var(--orange)}
  .btnCrunchy:hover{filter:brightness(.9)}
  .noLink{color:#fca5a5}

  .footer{margin:10px 0;text-align:center;color:var(--muted);font-size:13px}
</style>
</head>
<body>
  <div class="header"><h1>üì∫ Meine geschauten Anime</h1></div>

  <div class="container">
    <div class="card">
      <div class="controls">
        <input id="q" type="search" placeholder="Suche nach Titel ‚Ä¶" aria-label="Suche">
        <select id="lang">
          <option value="">Alle Sprachen</option>
          <option value="Deutsch geschaut">Deutsch geschaut</option>
        </select>
        <select id="sort">
          <option value="title-asc">Titel A‚ÄìZ</option>
          <option value="title-desc">Titel Z‚ÄìA</option>
        </select>
      </div>

      <div id="list" class="list" aria-live="polite"></div>
      <div id="empty" class="footer" style="display:none">Keine Treffer.</div>
      <div class="footer">
        Tipp: Titel antippen ‚Üí **lange Beschreibung (7 S√§tze)**, **deutscher Trailer** und Streaming-Button  
        (Reihenfolge: <b>AniWorld</b> ‚Üí <b>Netflix</b> ‚Üí <b>Crunchyroll</b>).  
        Links ist Platz f√ºr dein Bild ‚Äì wir f√ºgen die sp√§ter zusammen hinzu.
      </div>
    </div>
  </div>

<script>
/* ====================== DATEN =========================
   Bild-Pfad:
   - F√ºr ‚ÄûThe Seven Deadly Sins‚Äú verwende ich DEIN Bild im Repo-Root: "../seven-deadly-sins.jpg"
   - F√ºr alle anderen vorerst Platzhalter ("Bild folgt"), bis du Bilder hochl√§dst (z.B. in images/‚Ä¶)
*/
const DATA = [
    /* --- 1) 7 S√§tze ausgearbeitet: The Seven Deadly {
  id:"the-seven-deadly-sins",
  title:"The Seven Deadly Sins",
  image: "images/seven-deadly-sins.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/the-seven-deadly-sins",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/_erEYpW3L0E",
  description: [
    "In einem vom Chaos bedrohten K√∂nigreich werden die Seven Deadly Sins, eine Gruppe legend√§rer Ritter, zu Unrecht des Verrats beschuldigt.",
    "Jahre sp√§ter begibt sich Prinzessin Elizabeth heimlich auf eine gef√§hrliche Reise, um die S√ºnden zu finden und die Wahrheit ans Licht zu bringen.",
    "An ihrer Seite steht Meliodas, der unbek√ºmmert wirkende Anf√ºhrer mit einer Kraft, die seine kindliche Erscheinung L√ºgen straft.",
    "Gemeinsam sammeln sie die verstreuten Mitglieder, die alle einzigartige F√§higkeiten, tiefe Wunden und unerwartete Eigenheiten mitbringen.",
    "W√§hrend Intrigen und D√§monen das Land √ºberrollen, enth√ºllen sie uralte B√ºndnisse, verfluchte Schicksale und bitters√º√üe Erinnerungen.",
    "Zwischen epischen Schlachten, herzlichem Humor und tragischer Liebe w√§chst eine Familie, die nicht durch Blut, sondern durch Loyalit√§t verbunden ist.",
    "Am Ende ist es nicht nur rohe St√§rke, sondern Vertrauen, das entscheidet, ob Britannia in der Dunkelheit versinkt oder neu erbl√ºht."
  ]
},

  /* --- 2) 7 S√§tze: Attack on Titan --- */
{
  id:"attack-on-titan",
  title:"Attack on Titan",
  image:"./images/attack-on-titan.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/attack-on-titan",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/M7s1DpCmUo",
  description: [
    "Hinter gewaltigen Mauern versucht die Menschheit, den Titanen zu entkommen ‚Äì monstr√∂sen Wesen ohne Gnade.",
    "Als die √§u√üere Mauer f√§llt, schw√∂rt Eren, die Titanen bis zum letzten Atemzug zu bek√§mpfen.",
    "Mikasa und Armin bleiben an seiner Seite, getrieben von Verlust, Schuld und der Hoffnung auf Freiheit.",
    "Im Milit√§r entdecken sie, dass der wahre Feind nicht nur drau√üen lauert, sondern auch in L√ºgen, Geheimnissen und Machtspielen verborgen ist.",
    "Jede Schlacht fordert Opfer, doch auch Erkenntnisse: Hinter der Wahrheit liegt ein weiteres St√ºck der vermeintlichen Ordnung.",
    "Eren ver√§ndert sich ‚Äì und mit ihm die Grenzen zwischen Held, Waffe und Bedrohung.",
    "Am Ende fragt die Serie, welchen Preis Freiheit wirklich hat und wer ihn bezahlen darf."
  ]
},

  /* --- 3) 7 S√§tze: Chainsaw Man --- */
{
  id:"chainsaw-man",
  title:"Chainsaw Man",
  image:"./images/chainsaw-man.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/chainsaw-man",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/kdKMc0PhvXc",
  description: [
    "Denji kennt nur Schulden, Hunger und die K√§lte der Stra√üe ‚Äì bis er Pochita trifft, einen Teufel mit warmem Herz.",
    "Als Verrat ihn das Leben kostet, verschmilzt Pochita mit ihm und schenkt ihm eine zweite Chance als Chainsaw Man.",
    "Mit kreischenden Ketten und blutigem Humor zieht Denji in den Kampf gegen Teufel, die aus menschlichen √Ñngsten geboren sind.",
    "Er tr√§umt von einem einfachen Leben: satt sein, N√§he sp√ºren, jemanden wichtig sein.",
    "Doch die Welt der J√§ger ist ein Labyrinth aus Manipulation, Trauma und verf√ºhrerischer Macht.",
    "Zwischen Power, Aki und Makima lernt Denji, dass W√ºnsche ein Preisschild tragen ‚Äì oft bezahlt mit der eigenen Unschuld.",
    "Sein gr√∂√üter Kampf ist nicht gegen Teufel, sondern darum, Mensch zu bleiben."
  ]
},

  /* --- 4) 7 S√§tze: Demon Slayer --- */
{
  id:"demon-slayer",
  title:"Demon Slayer (Kimetsu no Yaiba)",
  image:"images/demon-slayer.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/demon-slayer",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/VOGGXvyzIM4",
  description: [
    "Als Tanjiro sein Zuhause zerst√∂rt und seine Familie ermordet vorfindet, bleibt nur Hoffnung: seine Schwester Nezuko lebt ‚Äì als D√§mon.",
    "Er schw√∂rt, ein D√§monenj√§ger zu werden, um Nezuko zu retten und den Ursprung des Fluchs zu brechen.",
    "Auf seinem Weg begegnet er Verb√ºndeten und Meistern, deren Geschichten erz√§hlen, die tiefer schneiden als jede Klinge.",
    "Die K√§mpfe sind T√§nze aus Atemtechniken, Sch√∂nheit und Schmerz, in denen Wille und Pflicht aufeinandertreffen.",
    "Jeder D√§mon birgt ein menschliches Echo, das es zu h√∂ren und zu verstehen gilt.",
    "Tanjiros Mitgef√ºhl ist seine gr√∂√üte St√§rke ‚Äì und seine schwerste Schw√§che.",
    "Zwischen Familie, Schuld und Schicksal w√§chst ein Junge √ºber sich hinaus."
  ]
},

  /* --- 5) 7 S√§tze: Dr. STONE --- */
{
  id:"dr-stone",
  title:"Dr. STONE",
  image:"images/dr-stone.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/dr-stone",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/ojX5Y6aUueE",
  description: [
    "Ein grelles Licht versteinert die Menschheit ‚Äì Jahrtausende sp√§ter erwacht Senku in einer Welt ohne St√§dte.",
    "Mit messerscharfem Verstand und unersch√ºtterlicher Neugier will er die Zivilisation neu erfinden.",
    "Aus Steinen, Pflanzen und Mut entstehen Seife, Glas, Strom ‚Äì und Hoffnung.",
    "Doch nicht jeder w√ºnscht sich eine R√ºckkehr der alten Welt; Ideale prallen aufeinander.",
    "Freundschaft wird zur Triebkraft, Wissen zur Magie, die das Unm√∂gliche greifbar macht.",
    "Fehler sind Experimente, R√ºckschl√§ge nur Zwischenschritte.",
    "Senku beweist: Die st√§rkste Waffe des Menschen ist der Gedanke."
  ]
},

  /* --- 6) 7 S√§tze: Mushoku Tensei --- */
  /* --- 6) 7 S√§tze: Mushoku Tensei --- */
{
  id:"mushoku-tensei",
  title:"Mushoku Tensei",
  image:"images/mushoku-tensei.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/mushoku-tensei-isekai-ittara-honki-dasu",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/7AaLwZGMEYw",
  description: [
    "Ein gescheiterter Mann erh√§lt eine zweite Geburt in einer Welt der Magie.",
    "Als Rudeus schw√∂rt er, diesmal mutiger zu sein, zu lernen, zu lieben.",
    "Lehrer, Freunde und Rivalen spiegeln seine Schw√§chen und sein Wachstum.",
    "Er entdeckt, dass Reue ein Anfang sein kann, wenn man Verantwortung √ºbernimmt.",
    "Magie ist Macht, doch die schwerste Kunst bleibt Mitgef√ºhl.",
    "Fehler verschwinden nicht, aber sie k√∂nnen zu Stufen werden.",
    "Ein Leben neu zu schreiben beginnt mit dem n√§chsten Schritt."
  ]
},

/* --- 7) 7 S√§tze: Tokyo Ghoul --- */
{
  id:"tokyo-ghoul",
  title:"Tokyo Ghoul",
  image:"images/tokyo-ghoul.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/tokyo-ghoul",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/vdGuQeQs0Rg",
  description: [
    "Kaneki √ºberlebt ein Date ‚Äì und verliert sein altes Leben.",
    "Als Halb-Ghoul steht er zwischen zwei Welten, hungrig nach Sinn und nach Fleisch.",
    "In Anteiku findet er eine fragile Familie und die Kunst, Menschlichkeit zu bewahren.",
    "Doch Gewalt eskaliert, Masken fallen, Ideale brechen.",
    "Kaneki lernt, dass St√§rke ohne Selbstannahme nur eine weitere Maske ist.",
    "Jede Entscheidung kostet jemanden etwas ‚Äì oft sich selbst.",
    "Aus dem Opfer wird ein Akteur, doch der Preis ist hoch."
  ]
},

  /* --- 8) 7 S√§tze: Charlotte --- */
{
  id:"charlotte",
  title:"Charlotte",
  image:"images/charlotte.jpg",   // dein hochgeladenes Bild
  language:"Deutsch geschaut",
  aniworld:"https://aniworld.to/anime/stream/charlotte",
  netflix:"",
  crunchy:"",
  trailer:"https://www.youtube.com/embed/oVjjJdQzYrY",
  description: [
    "Yuu stiehlt f√ºr Sekunden K√∂rper ‚Äì eine F√§higkeit, die sich wie ein Trick anf√ºhlt.",
    "In einer Schule f√ºr Begabte lernt er, dass Macht Verantwortung hei√üt.",
    "Jeder Sch√ºler tr√§gt eine Last, die sich nicht heilen, aber teilen l√§sst.",
    "Schicksalsschl√§ge zerrei√üen Gewissheiten und formen neue Ziele.",
    "Yuus Weg f√ºhrt √ºber Verlust, Erinnerung und Opfer zu Reife.",
    "Liebe wird zum Anker, wenn Zeit und Identit√§t br√ºchig werden.",
    "Am Ende z√§hlt, was man f√ºr andere rettet ‚Äì nicht, was man selbst beh√§lt."
  ]
},

  {id:"assassination-classroom", title:"Assassination Classroom", image:"assassination-classroom.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/assassination-classroom", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/qKlCqjXfCgQ",
description:[
    "Eine Klasse soll ihren √ºberm√§chtigen Lehrer t√∂ten, bevor er die Erde zerst√∂rt.",
    "Zwischen absurdem Unterricht und ernster Entwicklung w√§chst aus Angst Respekt."
]},

{id:"dan-da-dan", title:"Dan Da Dan", image:"dan-da-dan.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/dan-da-dan", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/JRJfLRQ4-3E",
description:[
    "Aliens, Geister und Teenager prallen in rasanter Comedy-Action aufeinander.",
    "Humor, Horror und Herz im wilden Wechsel."
]},

{id:"divergent-film", title:"Divergent (Film)", image:"divergent.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/film/stream/divergent", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/sutJH6qzJrI",
description:[
    "Tris passt in kein System ‚Äì und stellt es deshalb infrage.",
    "Mut und Identit√§t gegen Kontrolle und Etiketten."
]},

{id:"elfen-lied", title:"Elfen Lied", image:"elfen-lied.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/elfen-lied", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/2OMStc2Q998",
description:[
    "Zarte Unschuld trifft brutale Gewalt ‚Äì und beides lebt im selben Menschen.",
    "Liebe, Schuld und Trauma im blutigen Schicksal."
]},

{id:"failure-frame", title:"Failure Frame", image:"failure-frame.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/failure-frame", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/pJAWp1Cz09g",
description:[
    "Vom Versager zum R√§cher: niedrige Zauber, hohe Konsequenzen.",
    "Dunkler Isekai √ºber W√ºrde und Vergeltung."
]},

{id:"fumetsu-no-anata-e", title:"You Are My Eternity (Fumetsu no Anata e)", image:"you-are-my-eternity.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/fumetsu-no-anata-e", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/0PFvV2eJ36A",
description:[
    "Ein Unsterblicher lernt Menschlichkeit ‚Äì durch Schmerz, Bindung und Erinnerung.",
    "Ein leiser, tiefer Blick auf Werden und Verlust."
]},

{id:"gachiakuta", title:"Gachiakuta", image:"gachiakuta.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/gachiakuta", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/JwRFXWYNpC",
description:[
    "Wut, M√ºll, Klassenschuss, roher Stil: Kampf um Gerechtigkeit von unten.",
    "Hoffnung als Ziel."
]},

{id:"hells-paradise", title:"Hell‚Äôs Paradise", image:"hells-paradise.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/hells-paradise", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/Vn65EZVE9v0",
description:[
    "Todgeweihte auf einer t√∂dlichen Insel suchen das Elixier des Lebens.",
    "Sch√∂nheit, Grauen und Moral im Widerspruch."
]},

{id:"higurashi", title:"Higurashi", image:"higurashi.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/higurashi-no-naku-koro-ni", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/kbK6YJ8CqBQ",
description:[
    "Idylle als Maske: ein Dorf spielt Albtr√§ume in Schleifen.",
    "Freundschaft gegen Paranoia."
]},

{id:"lookism", title:"Lookism", image:"lookism.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/lookism/epi/186419-episode-1", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/KO1lL9ymS2Y",
description:[
    "Zwei K√∂rper, zwei Leben ‚Äì und die Suche nach Respekt.",
    "Empathie als Antwort auf Oberfl√§chlichkeit."
]},

{id:"lord-of-mysteries", title:"Lord of Mysteries", image:"lord-of-mysteries.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/lord-of-mysteries", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/9zLPlRKxc8c",
description:[
    "Steampunk, Okkultismus, geheime Pfade der Macht.",
    "Schicksal gegen Verwandlung."
]},

{id:"mashle", title:"Mashle", image:"mashle.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/mashle", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/OdQK7cyY9qg",
description:[
    "Keine Magie, nur Muskeln ‚Äì und trotzdem heldenhaft.",
    "Humor, Punchlines und Herz."
]},

{id:"masamune-kun-revenge", title:"Masamune-kun‚Äôs Revenge", image:"masamune-kun-revenge.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/masamune-kuns-revenge", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/9J62Dc0Y9uY",
description:[
    "Rache als Plan, Gef√ºhle als St√∂rfaktor.",
    "Kom√∂die mit Spiegel auf Selbstbild."
]},

{id:"my-hero-academia", title:"My Hero Academia", image:"my-hero-academia.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/my-hero-academia", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/MZDL7hHcB3E",
description:[
    "Quirks √ºberall ‚Äì doch Held sein beginnt im Herzen.",
    "Sch√ºler, Rivalen, Lehrer und Feuer im Kampf."
]},

{id:"naruto", title:"Naruto", image:"naruto.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/naruto", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/-09Bkg2XRA",
description:[
    "Ein Au√üenseiter jagt seinen Traum und gewinnt ein Dorf.",
    "Freundschaft, Wille ‚Äì und viel Ramen."
]},

{id:"naruto-shippuden", title:"Naruto Shippuden", image:"naruto-shippuden.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/naruto-shippuuden", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/kHwgSaG2M54",
description:[
    "R√ºckkehr, Verantwortung, Abschiede ‚Äì erwachsen werden unter Feuer.",
    "B√ºndnisse gegen Schatten der Vergangenheit."
]},

{id:"one-punch-man", title:"One Punch Man", image:"one-punch-man.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/one-punch-man", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/2JAElThbK7I",
description:[
    "Unendliche Macht, endlose Langeweile.",
    "Heldentum mit satirischer Klinge."
]},

{id:"sword-art-online", title:"Sword Art Online", image:"sword-art-online.jpg", language:"Deutsch geschaut",
aniworld:"https://aniworld.to/anime/stream/sword-art-online", netflix:"", crunchy:"",
trailer:"https://www.youtube.com/embed/WZZysQaYWpo",
description:[
    "Gefangen im Spiel ‚Äì Liebe und √úberleben als Quest.",
    "Virtuelle Welten, echte Gef√ºhle."
]},

/* ================== HILFSFUNKTIONEN ================== */
const list   = document.getElementById('list');
const empty  = document.getElementById('empty');
const q      = document.getElementById('q');
const lang   = document.getElementById('lang');
const sortEl = document.getElementById('sort');

const LS = {
  getRating:(id)=> +localStorage.getItem('rating:'+id)||0,
  setRating:(id,v)=> localStorage.setItem('rating:'+id, v),
  getCrown:(id)=> localStorage.getItem('crown:'+id)==='1',
  setCrown:(id,v)=> localStorage.setItem('crown:'+id, v?'1':'0')
};

function makeStars(id){
  const wrap = document.createElement('div'); wrap.className='rating';
  const stars = document.createElement('div'); stars.className='stars';
  const crown = document.createElement('span'); crown.className='crown'; crown.textContent='üëë';

  const confirm = document.createElement('div'); confirm.className='confirm';
  const btnOk = document.createElement('button'); btnOk.className='btnMini'; btnOk.textContent='Best√§tigen';
  const btnCancel = document.createElement('button'); btnCancel.className='btnMini'; btnCancel.textContent='Abbrechen';
  confirm.append(btnOk, btnCancel);

  let saved = LS.getRating(id);
  let tmp = 0;
  let hasCrown = LS.getCrown(id);

  const starEls = [];
  for(let i=1;i<=5;i++){
    const s = document.createElement('span');
    s.className='star'; s.textContent='‚òÖ';
    s.addEventListener('click', ()=>{
      tmp = i;
      draw();
      confirm.classList.add('show');
    });
    starEls.push(s);
    stars.appendChild(s);
  }

  crown.addEventListener('click', ()=>{
    hasCrown = !hasCrown;
    if(hasCrown){ saved = 5; LS.setRating(id,5); }
    LS.setCrown(id, hasCrown);
    tmp = 0; // pending weg
    confirm.classList.remove('show');
    draw();
  });

  btnOk.addEventListener('click', ()=>{
    saved = tmp || saved;
    LS.setRating(id, saved);
    tmp = 0;
    confirm.classList.remove('show');
    draw();
  });
  btnCancel.addEventListener('click', ()=>{
    tmp = 0;
    confirm.classList.remove('show');
    draw();
  });

  function draw(){
    const active = tmp || saved || (hasCrown?5:0);
    starEls.forEach((el,idx)=>{
      el.classList.toggle('filled', idx < active);
    });
    crown.classList.toggle('active', hasCrown);
  }
  draw();

  wrap.append(stars, crown, confirm);
  return wrap;
}

/* ================== RENDERING ================== */
function makeRow(item){
  const row = document.createElement('div'); row.className='row';
  const wrap = document.createElement('div'); wrap.className='card-row';

// Bild / Platzhalter
const thumb = document.createElement('div');
thumb.className = 'thumb';

if (item.image && item.image.trim() !== '') {
  const img = new Image();               // <img> sauber erstellen
  img.alt = item.title;

  img.onload = () => {
    // wenn geladen -> Platzhalter-Text ausblenden
    thumb.classList.add('has-img');
  };

  img.onerror = () => {
    // falls Pfad falsch o.√§.
    thumb.textContent = 'Bild folgt';
  };

  thumb.textContent = '';                // evtl. Text entfernen
  img.src = item.image;                  // WICHTIG: zuletzt setzen
  thumb.appendChild(img);
} else {
  thumb.textContent = 'Bild folgt';
}

  // Infos
  const info = document.createElement('div'); info.className='info';
  const title = document.createElement('h3'); title.className='title';
  const btn = document.createElement('button'); btn.textContent = item.title; title.appendChild(btn);

  const meta = document.createElement('div'); meta.className='meta';
  const badge = document.createElement('span'); badge.className='badge'; badge.textContent = item.language || 'Sprache fehlt';
  const rating = makeStars(item.id);
  meta.append(badge, rating);

  const details = document.createElement('div'); details.className='details';

  // Beschreibung (7 S√§tze, wenn Array; sonst join)
  let descHTML = '';
  if (Array.isArray(item.description)) {
    descHTML = `<p class="desc">${item.description.join(' ')}</p>`;
  } else if (item.description) {
    descHTML = `<p class="desc">${item.description}</p>`;
  }

  // Trailer
  const yt = item.trailer ? `<iframe src="${item.trailer}" allowfullscreen></iframe>` : '';

  // Button-Reihenfolge
  let linkHTML = '';
  if(item.aniworld){
    linkHTML = `<a class="btn btnAni" target="_blank" href="${item.aniworld}">‚ñ∂ Auf AniWorld ansehen</a>`;
  } else if(item.netflix){
    linkHTML = `<a class="btn btnNetflix" target="_blank" href="${item.netflix}">‚ñ∂ Auf Netflix ansehen</a>`;
  } else if(item.crunchy){
    linkHTML = `<a class="btn btnCrunchy" target="_blank" href="${item.crunchy}">‚ñ∂ Auf Crunchyroll ansehen</a>`;
  } else {
    linkHTML = `<p class="noLink">Kein Streaminglink hinterlegt ‚Äì sag mir Bescheid.</p>`;
  }

  details.innerHTML = `${descHTML}${yt}${linkHTML}`;

  btn.addEventListener('click', ()=>{
    const open = details.style.display==='block';
    document.querySelectorAll('.details').forEach(d=>d.style.display='none');
    details.style.display = open ? 'none' : 'block';
  });

  info.appendChild(title);
  info.appendChild(meta);
  info.appendChild(details);
  wrap.appendChild(thumb);
  wrap.appendChild(info);
  row.appendChild(wrap);
  return row;
}

function render(arr){
  const list = document.getElementById('list');
  list.innerHTML = '';
  arr.forEach(item => list.appendChild(makeRow(item)));
  empty.style.display = arr.length ? 'none' : 'block';
}

/* ================== FILTER/SORT ================== */
function applyFilters(){
  const term = (q.value||'').trim().toLowerCase();
  const l = lang.value;
  const s = sortEl.value;
  let cur = DATA.filter(x => x.title.toLowerCase().includes(term));
  if(l) cur = cur.filter(x => (x.language||'')===l);
  cur.sort((a,b)=> s==='title-asc' ? a.title.localeCompare(b.title) : b.title.localeCompare(a.title));
  render(cur);
}

q.addEventListener('input', applyFilters);
lang.addEventListener('change', applyFilters);
sortEl.addEventListener('change', applyFilters);

/* Start */
applyFilters();
</script>
</body>
</html>
